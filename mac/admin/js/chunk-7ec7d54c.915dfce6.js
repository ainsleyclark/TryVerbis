(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ec7d54c"],{"0ac5":function(e,t,s){"use strict";var a=s("d5e6"),i=s.n(a);i.a},d5e6:function(e,t,s){},e22f:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("4160"),s("d3b7"),s("159b");var a={data:function(){return{doingAxios:!0,saving:!1,errors:{},data:{}}},mounted:function(){this.getOptions()},methods:{getOptions:function(){var e=this;this.axios.get("/options").then((function(t){e.data=t.data.data})).catch((function(t){e.helpers.handleResponse(t)})).finally((function(){"function"==typeof e.runAfterGet&&e.runAfterGet(),setTimeout((function(){e.doingAxios=!1}),e.axiosTimeout?200:0)}))},save:function(){var e=this;this.saving=!0,"function"==typeof this.runBeforeSave&&this.runBeforeSave(),this.axios.post("/options",this.data).then((function(){e.errors=[],e.$noty.success("Site options updated successfully.")})).catch((function(t){if(e.helpers.checkServer(t),400===t.response.status)return e.validate(t.response.data.data.errors),e.$noty.error(e.errorMsg),void e.setAllHeight();e.helpers.handleResponse(t)})).finally((function(){setTimeout((function(){e.saving=!1}),e.timeoutDelay),setTimeout((function(){e.axios.get("/site").then((function(t){e.$store.commit("setSite",t.data.data)}))}),500)}))},validate:function(e){var t=this;this.errors={},e.forEach((function(e){t.$set(t.errors,e.key,e.message)}))}}}},f729:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",[s("div",{staticClass:"auth-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("header",{staticClass:"header header-with-actions header-margin-large"},[s("div",{staticClass:"header-title"},[s("h1",[e._v("Seo & Meta Settings")]),s("Breadcrumbs")],1),s("div",{staticClass:"header-actions"},[s("button",{staticClass:"btn btn-fixed-height btn-orange",class:{"btn-loading":e.saving},on:{click:function(t){return t.preventDefault(),e.save(t)}}},[e._v(" Update "),s("span",{staticClass:"btn-hide-text-mob"},[e._v("Settings")])])])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.doingAxios&&e.loadingMeta,expression:"doingAxios && loadingMeta"}],staticClass:"media-spinner spinner-container"},[s("div",{staticClass:"spinner spinner-large spinner-grey"})]),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.doingAxios&&!e.loadingMeta,expression:"!doingAxios && !loadingMeta"}],staticClass:"row trans-fade-in-anim"},[s("div",{staticClass:"col-12"},[s("h6",{staticClass:"margin"},[e._v("Visibility")]),s("div",{staticClass:"card card-small-box-shadow card-expand"},[s("div",{staticClass:"collapse-border-bottom"},[s("div",{staticClass:"card-header card-header-block"},[e._m(0),s("div",{staticClass:"toggle"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.data["seo_private"],expression:"data['seo_private']"}],staticClass:"toggle-switch",attrs:{type:"checkbox",id:"seo-public","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.data["seo_private"])?e._i(e.data["seo_private"],null)>-1:e.data["seo_private"]},on:{change:function(t){var s=e.data["seo_private"],a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&e.$set(e.data,"seo_private",s.concat([r])):o>-1&&e.$set(e.data,"seo_private",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.data,"seo_private",i)}}}),s("label",{attrs:{for:"seo-public"}})])])])])]),s("div",{staticClass:"col-12"},[s("h6",{staticClass:"margin"},[e._v("Global meta")]),e.loadingMeta?e._e():s("div",{staticClass:"card card-small-box-shadow card-expand"},[s("MetaForm",{attrs:{meta:e.meta},on:{update:e.updateMeta}})],1)]),s("div",{staticClass:"col-12"},[s("h6",{staticClass:"margin"},[e._v("Sitemap")]),s("div",{staticClass:"card card-small-box-shadow card-expand"},[s("Collapse",{staticClass:"collapse-border-bottom",attrs:{show:!1},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"card-header card-header-block"},[s("div",[s("h4",{staticClass:"card-title"},[e._v("Serve sitemap?")]),s("p",[e._v("By disabling this selection the "),s("code",[e._v("/sitemap.xml")]),e._v(" file will not be automatically served from the Verbis server.")])]),s("div",{staticClass:"toggle"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.data["seo_sitemap_serve"],expression:"data['seo_sitemap_serve']"}],staticClass:"toggle-switch",attrs:{type:"checkbox",id:"seo-sitemap-serve",checked:"","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.data["seo_sitemap_serve"])?e._i(e.data["seo_sitemap_serve"],null)>-1:e.data["seo_sitemap_serve"]},on:{change:function(t){var s=e.data["seo_sitemap_serve"],a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&e.$set(e.data,"seo_sitemap_serve",s.concat([r])):o>-1&&e.$set(e.data,"seo_sitemap_serve",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.data,"seo_sitemap_serve",i)}}}),s("label",{attrs:{for:"seo-sitemap-serve"}})])])]},proxy:!0}])}),s("Collapse",{staticClass:"collapse-border-bottom",attrs:{show:!1},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"card-header card-header-block"},[s("div",[s("h4",{staticClass:"card-title"},[e._v("Include redirects?")]),s("p",[e._v("By disabling this selection the redirects will not be included in the sitemap.")])]),s("div",{staticClass:"toggle"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.data["seo_sitemap_redirects"],expression:"data['seo_sitemap_redirects']"}],staticClass:"toggle-switch",attrs:{type:"checkbox",id:"seo-sitemap-redirects",checked:"","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.data["seo_sitemap_redirects"])?e._i(e.data["seo_sitemap_redirects"],null)>-1:e.data["seo_sitemap_redirects"]},on:{change:function(t){var s=e.data["seo_sitemap_redirects"],a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&e.$set(e.data,"seo_sitemap_redirects",s.concat([r])):o>-1&&e.$set(e.data,"seo_sitemap_redirects",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.data,"seo_sitemap_redirects",i)}}}),s("label",{attrs:{for:"seo-sitemap-redirects"}})])])]},proxy:!0}])}),e.data["seo_sitemap_serve"]?s("Collapse",{staticClass:"collapse-border-bottom",attrs:{show:!1},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"card-header"},[s("div",[s("h4",{staticClass:"card-title"},[e._v("View sitemap")]),s("p",[e._v("View the XML sitemap that Verbis generates.")])]),s("div",{staticClass:"card-controls"},[s("i",{staticClass:"feather feather-chevron-down"})])])]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"card-body"},[s("div",{staticClass:"seo-sitemap-btn"},[s("a",{staticClass:"btn",attrs:{href:e.getSiteUrl+"/sitemap.xml",target:"_blank"}},[e._v("Open in new tab")])]),s("prism-editor",{staticClass:"prism prism-large",attrs:{readonly:!0,highlight:e.highlighter},model:{value:e.sitemap,callback:function(t){e.sitemap=t},expression:"sitemap"}})],1)]},proxy:!0}],null,!1,3627400424)}):e._e(),s("Collapse",{staticClass:"collapse-border-bottom",attrs:{show:!1},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"card-header"},[s("div",[s("h4",{staticClass:"card-title"},[e._v("Exclude resources")]),s("p",[e._v("Select resources to exclude from the XML sitemap.")])]),s("div",{staticClass:"card-controls"},[s("i",{staticClass:"feather feather-chevron-down"})])])]},proxy:!0},{key:"body",fn:function(){return[s("div",{ref:"resources",staticClass:"card-body"},[s("vue-tags-input",{attrs:{tags:e.selectedTags,"autocomplete-items":e.filteredResources,"add-only-from-autocomplete":"","autocomplete-min-length":0,placeholder:"Add excluded resource"},on:{"tags-changed":e.updateTags,focus:function(t){return e.updateHeight("resources")},blur:function(t){return e.updateHeight("resources")}},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}})],1)]},proxy:!0}])})],1)]),s("div",{staticClass:"col-12"},[s("h6",{staticClass:"margin"},[e._v("Robots")]),s("div",{staticClass:"card card-small-box-shadow card-expand"},[s("Collapse",{staticClass:"collapse-border-bottom",attrs:{show:!1},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"card-header card-header-block"},[s("div",[s("h4",{staticClass:"card-title"},[e._v("Serve robots?")]),s("p",[e._v("By disabling this selection the "),s("code",[e._v("/robots.txt")]),e._v(" file will not be automatically served from the Verbis server.")])]),s("div",{staticClass:"toggle"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.data["seo_robots_serve"],expression:"data['seo_robots_serve']"}],staticClass:"toggle-switch",attrs:{type:"checkbox",id:"seo-robots-serve",checked:"","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.data["seo_robots_serve"])?e._i(e.data["seo_robots_serve"],null)>-1:e.data["seo_robots_serve"]},on:{change:function(t){var s=e.data["seo_robots_serve"],a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&e.$set(e.data,"seo_robots_serve",s.concat([r])):o>-1&&e.$set(e.data,"seo_robots_serve",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.data,"seo_robots_serve",i)}}}),s("label",{attrs:{for:"seo-robots-serve"}})])])]},proxy:!0}])}),s("Collapse",{staticClass:"collapse-border-bottom",attrs:{show:!1},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"card-header"},[s("div",[s("h4",{staticClass:"card-title"},[e._v("Edit robots.txt")]),s("p",[e._v("Edit the "),s("code",[e._v("/robots.txt")]),e._v(" file which is automatically served by the Verbis server.")])]),s("div",{staticClass:"card-controls"},[s("i",{staticClass:"feather feather-chevron-down"})])])]},proxy:!0},{key:"body",fn:function(){return[s("div",{staticClass:"card-body"},[s("FormGroup",{attrs:{label:"Robots File",error:e.errors["robots"]}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.data["seo_robots"],expression:"data['seo_robots']"}],staticClass:"form-textarea form-input form-input-white",attrs:{rows:"6",type:"text"},domProps:{value:e.data["seo_robots"]},on:{input:function(t){t.target.composing||e.$set(e.data,"seo_robots",t.target.value)}}})])],1)]},proxy:!0}])})],1)]),s("div",{staticClass:"col-12"},[s("h6",{staticClass:"margin"},[e._v("Misc")]),s("div",{staticClass:"card card-small-box-shadow card-expand"},[s("Collapse",{staticClass:"collapse-border-bottom",attrs:{show:!1},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"card-header card-header-block"},[s("div",[s("h4",{staticClass:"card-title"},[e._v("Enforce trailing slashes?")]),s("p",[e._v("By enabling this option, all pages (apart from the homepage) will be redirected to to a trailing slash, for example "),s("code",[e._v("yoursite.com/posts")]),e._v(" becomes "),s("code",[e._v("yoursite.com/posts/")])])]),s("div",{staticClass:"toggle"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.data["seo_enforce_slash"],expression:"data['seo_enforce_slash']"}],staticClass:"toggle-switch",attrs:{type:"checkbox",id:"seo-enforce-slash","true-value":!0,"false-value":!1},domProps:{checked:Array.isArray(e.data["seo_enforce_slash"])?e._i(e.data["seo_enforce_slash"],null)>-1:e.data["seo_enforce_slash"]},on:{change:function(t){var s=e.data["seo_enforce_slash"],a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,o=e._i(s,r);a.checked?o<0&&e.$set(e.data,"seo_enforce_slash",s.concat([r])):o>-1&&e.$set(e.data,"seo_enforce_slash",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(e.data,"seo_enforce_slash",i)}}}),s("label",{attrs:{for:"seo-enforce-slash"}})])])]},proxy:!0}])})],1)])])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h4",{staticClass:"card-title"},[e._v("Private")]),s("p",[e._v("Enabling private will place a "),s("code",[e._v("no robots")]),e._v(" meta tag on the site, so the page is not visible to search engines.")])])}],r=(s("4de4"),s("7db0"),s("4160"),s("caad"),s("c975"),s("d81d"),s("b0c0"),s("2532"),s("159b"),s("90f8")),o=s("e22f"),c=s("a877"),n=s("e361"),l=s("d7f8"),d=s("2db8"),u=s.n(d),h=s("8c7a"),v=(s("6cf3"),{name:"SeoMeta",mixins:[o["a"]],components:{FormGroup:l["a"],Collapse:n["a"],MetaForm:c["a"],Breadcrumbs:r["a"],VueTagsInput:u.a},data:function(){return{errorMsg:"Fix the errors before saving SEO & Meta settings.",successMsg:"Seo & Meta options updated successfully.",showImageModal:!1,selectedImageType:"",facebookImage:!1,twitterImage:!1,meta:{},loadingMeta:!0,selectedTags:[],tags:[],tag:"",sitemap:""}},mounted:function(){this.getSitemap()},watch:{showRedirectModal:function(e){e||(this.selectedRedirect=!1,this.selectedRedirectKey=!1,this.selectedRedirect=!1)}},methods:{runAfterGet:function(){for(var e in this.data)e.includes("meta_")&&this.$set(this.meta,e,this.data[e]);this.loadingMeta=!1,this.setTags()},updateMeta:function(e,t){this.$set(this.data,t,e)},setTags:function(){var e=this;this.tags=this.getResources.map((function(e){return{text:e.friendly_name,name:e.name}}));var t=this.data["seo_sitemap_excluded"];t&&t.length&&t.forEach((function(t){var s=e.tags.find((function(e){return e.name===t}));s&&e.selectedTags.push({text:s.text,name:s.name})}))},updateTags:function(e){this.data["seo_sitemap_excluded"]={};var t=[];e.forEach((function(e){t.push(e.name)})),this.$set(this.data,"seo_sitemap_excluded",t)},updateHeight:function(e){var t=this;this.$nextTick((function(){console.log(e),console.log(t.$refs),t.helpers.setHeight(t.$refs[e].closest(".collapse-content"))}))},getSitemap:function(){var e=this;this.axios.get("/sitemap.xml",{baseURL:""}).then((function(t){e.sitemap=t.data}))},highlighter:function(e){return Object(h["highlight"])(e,h["languages"].xml,"xml")}},computed:{getResources:function(){var e=this.$store.state.theme.resources,t=[];for(var s in e)t.push(e[s]);return t.push({name:"pages",friendly_name:"Pages",singular_name:"Page",slug:"",icon:"fal fa-file"}),t},filteredResources:function(){var e=this;return this.tags.filter((function(t){return-1!==t.text.toLowerCase().indexOf(e.tag.toLowerCase())}))}}}),p=v,m=(s("0ac5"),s("2877")),f=Object(m["a"])(p,a,i,!1,null,"7f1ad203",null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-7ec7d54c.915dfce6.js.map