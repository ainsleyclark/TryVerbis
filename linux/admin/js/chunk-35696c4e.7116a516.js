(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35696c4e"],{2522:function(t,e,s){},"4c2d":function(t,e,s){"use strict";var a=s("cdcc"),i=s.n(a);i.a},"60c6":function(t,e,s){},"89fd":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{directives:[{name:"show",rawName:"v-show",value:!t.switchingResource,expression:"!switchingResource"}],staticClass:"archive-trans"},[s("div",{staticClass:"auth-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("header",{staticClass:"header header-with-actions"},[s("div",{staticClass:"header-title"},[s("h1",[t._v(t._s(t.resource["friendly_name"]))]),s("Breadcrumbs")],1),s("div",{staticClass:"header-actions"},[s("form",{staticClass:"form form-actions"},[s("div",{staticClass:"form-select-cont form-input header-hide-mob"},[4===t.activeTab?s("select",{directives:[{name:"model",rawName:"v-model",value:t.bulkType,expression:"bulkType"}],staticClass:"form-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.bulkType=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Bulk actions")]),s("option",{attrs:{value:"restore"}},[t._v("Restore")]),s("option",{attrs:{value:"delete"}},[t._v("Delete permanently")])]):3===t.activeTab?s("select",{directives:[{name:"model",rawName:"v-model",value:t.bulkType,expression:"bulkType"}],staticClass:"form-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.bulkType=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Bulk actions")]),s("option",{attrs:{value:"publish"}},[t._v("Publish")]),s("option",{attrs:{value:"bin"}},[t._v("Move to bin")])]):s("select",{directives:[{name:"model",rawName:"v-model",value:t.bulkType,expression:"bulkType"}],staticClass:"form-select",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.bulkType=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Bulk actions")]),s("option",{attrs:{value:"publish"}},[t._v("Publish")]),s("option",{attrs:{value:"draft"}},[t._v("Move to drafts")]),s("option",{attrs:{value:"bin"}},[t._v("Move to bin")])])]),s("button",{staticClass:"btn btn-fixed-height btn-margin btn-white header-hide-mob",class:{"btn-loading":t.isDoingBulk},on:{click:function(e){return e.preventDefault(),t.doBulkAction(e)}}},[t._v("Apply")]),s("router-link",{staticClass:"btn btn-icon btn-orange btn-text-mob",attrs:{to:{name:"editor",params:{id:"new"},query:{resource:t.resource["name"]}}}},[s("i",{staticClass:"fal fa-plus"}),s("span",[t._v("New "+t._s(t.resource["singular_name"]))])])],1)])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("Tabs",{on:{update:t.filterTabs}},[s("template",{slot:"item"},[t._v("Show all")]),s("template",{slot:"item"},[t._v("Published")]),s("template",{slot:"item"},[t._v("Drafts")]),s("template",{slot:"item"},[t._v("Bin")])],2),t.doingAxios?t._e():s("div",[s("transition",{attrs:{name:"trans-fade-quick",mode:"out-in"}},[t.posts.length?s("div",{staticClass:"table-wrapper"},[s("div",{staticClass:"table-scroll table-with-hover"},[s("table",{staticClass:"table archive-table"},[s("thead",[s("tr",[s("th",{staticClass:"table-header-checkbox"},[s("div",{staticClass:"form-checkbox form-checkbox-dark"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedAll,expression:"checkedAll"}],attrs:{type:"checkbox",id:"archive-check-all"},domProps:{checked:Array.isArray(t.checkedAll)?t._i(t.checkedAll,null)>-1:t.checkedAll},on:{change:function(e){var s=t.checkedAll,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);a.checked?r<0&&(t.checkedAll=s.concat([o])):r>-1&&(t.checkedAll=s.slice(0,r).concat(s.slice(r+1)))}else t.checkedAll=i}}}),s("label",{attrs:{for:"archive-check-all"}},[s("i",{staticClass:"fal fa-check"})])])]),s("th",{staticClass:"table-order",class:{active:"title"===t.activeOrder},on:{click:function(e){return t.changeOrderBy("title")}}},[s("span",[t._v("Name")]),s("i",{staticClass:"fas fa-caret-down",class:{active:"asc"!==t.orderBy["title"]}})]),s("th",{staticClass:"table-order",class:{active:"user_id"===t.activeOrder},on:{click:function(e){return t.changeOrderBy("user_id")}}},[s("span",[t._v("Author")]),s("i",{staticClass:"fas fa-caret-down",class:{active:"asc"!==t.orderBy["user_id"]}})]),s("th",{staticClass:"table-order",class:{active:"status"===t.activeOrder},on:{click:function(e){return t.changeOrderBy("status")}}},[s("span",[t._v("Status")]),s("i",{staticClass:"fas fa-caret-down",class:{active:"asc"!==t.orderBy["status"]}})]),s("th",[s("span",[t._v("Category")])]),s("th",{staticClass:"table-order",class:{active:"published_at"===t.activeOrder},on:{click:function(e){return t.changeOrderBy("published_at")}}},[s("span",[t._v("Published at")]),s("i",{staticClass:"fas fa-caret-down",class:{active:"asc"!==t.orderBy["published_at"]}})]),s("th")])]),s("tbody",t._l(t.posts,(function(e,a){return s("tr",{key:e.post.uuid},[s("td",{staticClass:"table-checkbox"},[s("div",{staticClass:"form-checkbox form-checkbox-dark"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox",id:e.post.uuid},domProps:{value:e.post.id,checked:Array.isArray(t.checked)?t._i(t.checked,e.post.id)>-1:t.checked},on:{change:function(s){var a=t.checked,i=s.target,o=!!i.checked;if(Array.isArray(a)){var r=e.post.id,c=t._i(a,r);i.checked?c<0&&(t.checked=a.concat([r])):c>-1&&(t.checked=a.slice(0,c).concat(a.slice(c+1)))}else t.checked=o}}}),s("label",{attrs:{for:e.post.uuid}},[s("i",{staticClass:"fal fa-check"})])])]),s("td",{staticClass:"archive-table-title"},[s("router-link",{attrs:{to:{name:"editor",params:{id:e.post.id},query:{resource:e.post.resource?e.post.resource:""}}}},[s("h4",[t._v(t._s(e.post.title))]),s("p",[t._v(t._s(e.post.slug))])])],1),s("td",{staticClass:"archive-table-author"},[t._v(" "+t._s(e.author["first_name"])+" "+t._s(e.author["last_name"])+" ")]),s("td",{staticClass:"archive-table-status"},[s("div",{staticClass:"badge capitalize",class:{"badge-yellow":"draft"===e.post.status,"badge-green":"published"===e.post.status,"badge-orange":"bin"===e.post.status}},[t._v(t._s(e.post.status))])]),s("td",[null!==e.category?s("span",[t._v(t._s(e.category.name))]):s("span",[t._v("No category")])]),s("td",{staticClass:"archive-table-date"},[e.post["published_at"]?s("span",[t._v(t._s(t._f("moment")(e.post["published_at"],"dddd, MMMM Do YYYY")))]):s("span",[t._v("Not published")])]),s("td",{staticClass:"table-actions"},[s("Popover",{attrs:{triangle:!1,classes:a+1>t.posts.length-4?"popover-table popover-table-top":"popover-table popover-table-bottom","item-key":e.post.uuid,active:t.activeAction},on:{update:function(s){return t.updateActions(s,e.post.uuid)}}},[s("template",{slot:"items"},[s("router-link",{staticClass:"popover-item popover-item-icon",attrs:{to:{name:"editor",params:{id:e.post.id},query:{resource:e.post.resource?e.post.resource:""}}}},[s("i",{staticClass:"feather feather-edit"}),s("span",[t._v("Edit")])]),s("a",{staticClass:"popover-item popover-item-icon",attrs:{href:t.getSiteUrl+e.post.slug,target:"_blank"}},[s("i",{staticClass:"feather feather-eye"}),s("span",[t._v("View")])]),"published"===e.post.status?s("div",{staticClass:"popover-item popover-item-icon",on:{click:function(s){return t.updateStatus(e.post.id,"draft")}}},[s("i",{staticClass:"feather feather-archive"}),s("span",[t._v("Move to drafts")])]):"draft"===e.post.status?s("div",{staticClass:"popover-item popover-item-icon",on:{click:function(s){return t.updateStatus(e.post.id,"published")}}},[s("i",{staticClass:"feather feather-archive"}),s("span",[t._v("Publish")])]):"bin"===e.post.status?s("div",{staticClass:"popover-item popover-item-icon",on:{click:function(s){return t.updateStatus(e.post.id,"draft")}}},[s("i",{staticClass:"feather feather-archive"}),s("span",[t._v("Restore")])]):t._e(),s("router-link",{staticClass:"popover-item popover-item-icon",attrs:{to:{name:"editor",params:{id:e.post.id},query:{tab:"meta"}}}},[s("i",{staticClass:"feather feather-external-link"}),s("span",[t._v("Meta")])]),s("router-link",{staticClass:"popover-item popover-item-icon",attrs:{to:{name:"editor",params:{id:e.post.id},query:{tab:"code-injection"}}}},[s("i",{staticClass:"feather feather-code"}),s("span",[t._v("Code Injection")])]),s("div",{staticClass:"popover-item popover-item-icon",on:{click:function(s){return t.clonePost(e)}}},[s("i",{staticClass:"feather feather-copy"}),s("span",[t._v("Clone")])]),s("div",{staticClass:"popover-line"}),"bin"===e.post.status?s("div",{staticClass:"popover-item popover-item-icon popover-item-border popover-item-orange",on:{click:function(s){return t.handleDelete(e.post)}}},[s("i",{staticClass:"feather feather-trash-2"}),s("span",[t._v("Delete")])]):s("div",{staticClass:"popover-item popover-item-icon popover-item-border popover-item-orange",on:{click:function(s){return t.updateStatus(e.post.id,"bin")}}},[s("i",{staticClass:"feather feather-trash-2"}),s("span",[t._v("Move to bin")])])],1),s("template",{slot:"button"},[s("i",{staticClass:"icon icon-square far fa-ellipsis-h",class:{"icon-square-active":t.activeAction===e.post.uuid}})])],2)],1)])})),0)])])]):s("Alert",{attrs:{colour:"orange"}},[t._t("default",[s("h3",[t._v("No "+t._s("all"===t.activeTabName?"":"bin"===t.activeTabName?"binned":t.activeTabName)+" "+t._s(t.resource["friendly_name"].toLowerCase())+" available. ")]),s("p",[t._v("To create a new one, click the button above.")])])],2)],1)],1)],1)]),s("transition",{attrs:{name:"archive-pagination-trans"}},[!t.doingAxios&&t.paginationObj?s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("Pagination",{attrs:{pagination:t.paginationObj},on:{update:t.setPagination}})],1)]):t._e()])],1),s("Modal",{staticClass:"modal-with-icon modal-with-warning",attrs:{show:t.showDeleteModal},on:{"update:show":function(e){t.showDeleteModal=e}}},[s("template",{slot:"button"},[s("button",{staticClass:"btn",class:{"btn-loading":t.isDeleting},on:{click:function(e){return t.deletePost(!1)}}},[t._v("Delete")])]),s("template",{slot:"text"},[s("h2",[t._v("Are you sure?")]),t.selectedPost?s("p",[t._v("Are you sure want to delete this "+t._s(t.resource["singular_name"])+"?")]):s("p",[t._v("Are you sure want to delete "+t._s(t.checked.length)+" "+t._s(t.resource["friendly_name"])+"?")])])],2)],1)},i=[],o=(s("99af"),s("4de4"),s("7db0"),s("4160"),s("d81d"),s("b0c0"),s("d3b7"),s("4d63"),s("ac1f"),s("25f0"),s("3ca3"),s("5319"),s("159b"),s("ddb0"),s("96cf"),s("1da1")),r=s("a71d"),c=s("90f8"),n=s("9556"),l=s("e6e0"),u=s("2121"),d=s("3af4"),p={name:"Pages",title:"Archive",components:{Alert:r["a"],Breadcrumbs:c["a"],Modal:n["a"],Popover:l["a"],Pagination:u["a"],Tabs:d["a"]},data:function(){return{doingAxios:!0,resource:{},posts:[],selectedPost:!1,paginationObj:{},activeTab:1,activeTabName:"all",order:"",orderBy:{title:"asc",user_id:"asc",status:"asc",published_at:"asc"},activeOrder:"",filter:"",pagination:"",bulkType:"",checked:[],activeAction:"",showDeleteModal:!1,selectedDeleteId:null,isDoingBulk:!1,isDeleting:!1,switchingResource:!1}},mounted:function(){this.filterTabs(1),this.setResource()},watch:{"$route.params.resource":function(){this.switchingResource=!0,this.setResource(),this.getPosts(),this.activeTab=1,this.switchingResource=!1}},methods:{getPosts:function(){var t=this,e=this.$route.params.resource,s=/resources/+e;this.axios.get("".concat(s,"?order=").concat(this.order,"&filter=").concat(this.filter,"&").concat(this.pagination),{paramsSerializer:function(t){return t}}).then((function(e){t.posts={},t.paginationObj={},t.paginationObj=e.data.meta.pagination,t.posts=e.data.data})).catch((function(e){t.helpers.handleResponse(e)})).finally((function(){t.doingAxios=!1}))},deletePost:function(){var t=this;this.isDeleting=!0;var e=this.selectedPost?[this.selectedPost.id]:this.checked,s=[];e.forEach((function(e){s.push(t.deleteUserAxios(e))})),Promise.all(s).then((function(){var s=1===e.length?"".concat(t.resource["singular_name"]," deleted successfully."):"".concat(t.resource["name"]," deleted successfully.");t.$noty.success(s),t.getPosts()})).catch((function(e){t.helpers.handleResponse(e)})).finally((function(){t.activeAction="",t.checked=[],t.checkedAll=!1,t.showDeleteModal=!1,t.bulkType="",t.isDeleting=!1,t.selectedPost=!1}))},deleteUserAxios:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.axios.delete("/posts/"+t);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}}),s)})))()},handleDelete:function(t){this.selectedPost=t,this.showDeleteModal=!0},updateStatus:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"draft",a=[];e?a.push(e):a=this.checked;var i=[];a.forEach((function(e){var a=t.getPostsById(e).post;a.status=s,i.push(t.updateStatusAxios(e,a))})),Promise.all(i).then((function(){var e=1===a.length?"".concat(t.resource["singular_name"]," updated successfully."):"".concat(t.resource["name"]," updated successfully.");t.$noty.success(e),t.getPosts()})).catch((function(e){t.helpers.handleResponse(e)})).finally((function(){t.activeAction="",t.checked=[],t.checkedAll=!1,t.showDeleteModal=!1,t.bulkType="",setTimeout((function(){t.isDoingBulk=!1}),t.timeoutDelay)}))},updateStatusAxios:function(t,e){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.axios.put("/posts/"+t,e);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},setResource:function(){var t=this.getResources[this.$route.params.resource];this.resource=void 0===t?{name:"page",friendly_name:"Pages",singular_name:"Page",slug:"",icon:"fal fa-file"}:t},changeOrderBy:function(t){this.activeOrder=t,"desc"===this.orderBy[t]||""===this.orderBy[t]?this.$set(this.orderBy,t,"asc"):this.$set(this.orderBy,t,"desc"),this.order=t+","+this.orderBy[t],this.getPosts()},filterTabs:function(t){this.pagination="page=1",this.activeTab=t;var e="";switch(t){case 1:this.activeTabName="all",e='{"status":[{"operator":"NOT LIKE", "value": "bin" }]}';break;case 2:this.activeTabName="published",e='{"status":[{"operator":"=", "value": "published" }]}';break;case 3:this.activeTabName="draft",e='{"status":[{"operator":"=", "value": "draft" }]}';break;case 4:this.activeTabName="bin",e='{"status":[{"operator":"=", "value": "bin" }]}';break}this.checkedAll=!1,this.filter=e,this.getPosts()},setPagination:function(t){this.activeAction="",this.pagination=t,this.getPosts()},updateActions:function(t,e){this.activeAction=t?e:""},doBulkAction:function(){var t=this;if(this.isDoingBulk=!0,!this.checked.length)return this.$noty.warning("Select items in order to apply bulk actions"),void setTimeout((function(){t.isDoingBulk=!1}),this.timeoutDelay);"draft"===this.bulkType||"restore"===this.bulkType?this.updateStatus(!1,"draft"):"publish"===this.bulkType?this.updateStatus(!1,"published"):"bin"===this.bulkType?this.updateStatus(!1,"bin"):"delete"===this.bulkType?this.showDeleteModal=!0:(this.$noty.warning("Select a bulk action."),this.isDoingBulk=!1),setTimeout((function(){t.isDoingBulk=!1}),this.timeoutDelay)},getPostsById:function(t){return this.posts.find((function(e){return e.post.id===t}))},clonePost:function(t){var e=this,s=t.post.slug,a=new RegExp("^[0-9]+(-[0-9]+)+$"),i=a.test(s);i?s=s.replace(/(\d+)+/g,(function(t,e){return parseInt(e)+1})):s+="-1",this.posts.forEach((function(t){s===t.post.slug&&(s=s.replace(/(\d+)+/g,(function(t,e){return parseInt(e)+1})))}));var o={author:t.author.id,category:t.category.id,fields:t.post.fields,codeinjection_head:t.post.codeinjection_head,codeinjection_foot:t.post.codeinjection_foot,layout:t.post.layout,options:t.post.options,page_template:t.post.page_template,status:"draft",title:t.post.title+" (copy)",slug:s};this.axios.post("/posts",o).then((function(){e.getPosts(),e.$noty.success("".concat(e.resource["singular_name"]," cloned successfully"))})).catch((function(t){e.helpers.handleResponse(t)}))}},computed:{getResources:function(){return this.$store.state.theme.resources},checkedAll:{get:function(){return this.checked.length===this.posts.length},set:function(t){this.checked=t?this.posts.map((function(t){return t.post.id})):[]}}}},h=p,v=(s("b44c"),s("2877")),f=Object(v["a"])(h,a,i,!1,null,"771b15d2",null);e["default"]=f.exports},a71d:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"trans-fade-quick",mode:"out-in"}},[t.show?s("div",{staticClass:"alert alert-background",class:"alert-"+t.colour},[s("div",{staticClass:"alert-icon"},["error"===t.type?s("i",{staticClass:"feather feather-alert-triangle"}):t._e(),"warning"===t.type?s("i",{staticClass:"feather feather-alert-circle"}):t._e(),"success"===t.type?s("i",{staticClass:"feather feather-check-circle"}):t._e()]),s("div",{staticClass:"alert-text"},[t._t("default")],2),s("button",{staticClass:"alert-close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.show=!1}}},[s("i",{staticClass:"feather feather-x"})])]):t._e()])},i=[],o={name:"Alert",props:{colour:{type:String,default:""},type:{type:String,default:"error"}},data:function(){return{show:!0}}},r=o,c=(s("4c2d"),s("2877")),n=Object(c["a"])(r,a,i,!1,null,null,null);e["a"]=n.exports},b44c:function(t,e,s){"use strict";var a=s("2522"),i=s.n(a);i.a},cdcc:function(t,e,s){},d69c:function(t,e,s){"use strict";var a=s("60c6"),i=s.n(a);i.a},e6e0:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popover-cont"},[s("div",{staticClass:"popover-btn",on:{click:t.update}},[t._t("button")],2),s("div",{ref:"popover",staticClass:"popover",class:[{"popover-triangle":t.triangle},{"popover-active":t.show&&t.itemKey===t.active},t.classes]},[s("div",{staticClass:"popover-items-cont"},[t._t("items")],2)])])},i=[],o={name:"Alert",props:{items:{type:Array},triangle:{type:Boolean,default:!1},classes:{type:String,default:""},itemKey:{type:String,default:""},active:{type:String,default:""}},data:function(){return{show:!1}},methods:{update:function(){this.show=!this.show,this.$emit("update",this.show)}},computed:{getItems:function(){return this.items}}},r=o,c=(s("d69c"),s("2877")),n=Object(c["a"])(r,a,i,!1,null,null,null);e["a"]=n.exports}}]);
//# sourceMappingURL=chunk-35696c4e.7116a516.js.map