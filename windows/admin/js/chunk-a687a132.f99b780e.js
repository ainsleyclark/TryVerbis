(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a687a132"],{"4c2d":function(t,e,a){"use strict";var s=a("cdcc"),i=a.n(s);i.a},"551d":function(t,e,a){"use strict";var s=a("db3c"),i=a.n(s);i.a},"60c6":function(t,e,a){},"89fd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"auth-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("header",{staticClass:"header header-with-actions"},[a("div",{staticClass:"header-title"},[a("h1",[t._v(t._s(t.resource["friendly_name"]))]),a("Breadcrumbs")],1),a("div",{staticClass:"header-actions"},[a("form",{staticClass:"form form-actions"},[a("div",{staticClass:"form-select-cont form-input header-hide-mob"},[4===t.activeTab?a("select",{directives:[{name:"model",rawName:"v-model",value:t.bulkType,expression:"bulkType"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.bulkType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Bulk actions")]),a("option",{attrs:{value:"restore"}},[t._v("Restore")]),a("option",{attrs:{value:"delete"}},[t._v("Delete permanently")])]):3===t.activeTab?a("select",{directives:[{name:"model",rawName:"v-model",value:t.bulkType,expression:"bulkType"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.bulkType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Bulk actions")]),a("option",{attrs:{value:"publish"}},[t._v("Publish")]),a("option",{attrs:{value:"bin"}},[t._v("Move to bin")])]):a("select",{directives:[{name:"model",rawName:"v-model",value:t.bulkType,expression:"bulkType"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.bulkType=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Bulk actions")]),a("option",{attrs:{value:"publish"}},[t._v("Publish")]),a("option",{attrs:{value:"draft"}},[t._v("Move to drafts")]),a("option",{attrs:{value:"bin"}},[t._v("Move to bin")])])]),a("button",{staticClass:"btn btn-fixed-height btn-margin btn-white header-hide-mob",class:{"btn-loading":t.isDoingBulk},on:{click:function(e){return e.preventDefault(),t.doBulkAction(e)}}},[t._v("Apply")]),a("router-link",{staticClass:"btn btn-icon btn-orange btn-text-mob",attrs:{to:{name:"editor",params:{id:"new"},query:{resource:t.resource["name"]}}}},[a("i",{staticClass:"fal fa-plus"}),a("span",[t._v("New "+t._s(t.resource["singular_name"]))])])],1)])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("Tabs",{on:{update:t.filterTabs}},[a("template",{slot:"item"},[t._v("Show all")]),a("template",{slot:"item"},[t._v("Published")]),a("template",{slot:"item"},[t._v("Drafts")]),a("template",{slot:"item"},[t._v("Bin")])],2),t.doingAxios?t._e():a("div",[a("transition",{attrs:{name:"trans-fade-quick",mode:"out-in"}},[t.posts.length?a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-scroll table-with-hover"},[a("table",{staticClass:"table archive-table"},[a("thead",[a("tr",[a("th",{staticClass:"table-header-checkbox"},[a("div",{staticClass:"form-checkbox form-checkbox-dark"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedAll,expression:"checkedAll"}],attrs:{type:"checkbox",id:"archive-check-all"},domProps:{checked:Array.isArray(t.checkedAll)?t._i(t.checkedAll,null)>-1:t.checkedAll},on:{change:function(e){var a=t.checkedAll,s=e.target,i=!!s.checked;if(Array.isArray(a)){var o=null,r=t._i(a,o);s.checked?r<0&&(t.checkedAll=a.concat([o])):r>-1&&(t.checkedAll=a.slice(0,r).concat(a.slice(r+1)))}else t.checkedAll=i}}}),a("label",{attrs:{for:"archive-check-all"}},[a("i",{staticClass:"fal fa-check"})])])]),a("th",{staticClass:"table-order",class:{active:"title"===t.activeOrder},on:{click:function(e){return t.changeOrderBy("title")}}},[a("span",[t._v("Name")]),a("i",{staticClass:"fas fa-caret-down",class:{active:"asc"!==t.orderBy["title"]}})]),a("th",{staticClass:"table-order",class:{active:"user_id"===t.activeOrder},on:{click:function(e){return t.changeOrderBy("user_id")}}},[a("span",[t._v("Author")]),a("i",{staticClass:"fas fa-caret-down",class:{active:"asc"!==t.orderBy["user_id"]}})]),a("th",{staticClass:"table-order",class:{active:"status"===t.activeOrder},on:{click:function(e){return t.changeOrderBy("status")}}},[a("span",[t._v("Status")]),a("i",{staticClass:"fas fa-caret-down",class:{active:"asc"!==t.orderBy["status"]}})]),a("th",{staticClass:"table-order",class:{active:"published_at"===t.activeOrder},on:{click:function(e){return t.changeOrderBy("published_at")}}},[a("span",[t._v("Published at")]),a("i",{staticClass:"fas fa-caret-down",class:{active:"asc"!==t.orderBy["published_at"]}})]),a("th")])]),a("tbody",t._l(t.posts,(function(e,s){return a("tr",{key:e.post.uuid},[a("td",{staticClass:"table-checkbox"},[a("div",{staticClass:"form-checkbox form-checkbox-dark"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],attrs:{type:"checkbox",id:e.post.uuid},domProps:{value:e.post.id,checked:Array.isArray(t.checked)?t._i(t.checked,e.post.id)>-1:t.checked},on:{change:function(a){var s=t.checked,i=a.target,o=!!i.checked;if(Array.isArray(s)){var r=e.post.id,c=t._i(s,r);i.checked?c<0&&(t.checked=s.concat([r])):c>-1&&(t.checked=s.slice(0,c).concat(s.slice(c+1)))}else t.checked=o}}}),a("label",{attrs:{for:e.post.uuid}},[a("i",{staticClass:"fal fa-check"})])])]),a("td",{staticClass:"archive-table-title"},[t._v(" "+t._s(e.post.resource)+" "),a("router-link",{attrs:{to:{name:"editor",params:{id:e.post.id},query:{resource:e.post.resource?e.post.resource:""}}}},[a("h4",[t._v(t._s(e.post.title))]),a("p",[t._v(t._s(e.post.slug))])])],1),a("td",{staticClass:"archive-table-author"},[t._v(" "+t._s(e.author["first_name"])+" "+t._s(e.author["last_name"])+" ")]),a("td",{staticClass:"archive-table-status"},[a("div",{staticClass:"badge capitalize",class:{"badge-yellow":"draft"===e.post.status,"badge-green":"published"===e.post.status,"badge-orange":"bin"===e.post.status}},[t._v(t._s(e.post.status))])]),a("td",{staticClass:"archive-table-date"},[e.post["published_at"]?a("span",[t._v(t._s(t._f("moment")(e.post["published_at"],"dddd, MMMM Do YYYY")))]):a("span",[t._v("Not published")])]),a("td",{staticClass:"table-actions"},[a("Popover",{attrs:{triangle:!1,classes:s+1>t.posts.length-4?"popover-table popover-table-top":"popover-table popover-table-bottom","item-key":e.post.uuid,active:t.activeAction},on:{update:function(a){return t.updateActions(a,e.post.uuid)}}},[a("template",{slot:"items"},[a("router-link",{staticClass:"popover-item popover-item-icon",attrs:{to:{name:"editor",params:{id:e.post.id},query:{resource:e.post.resource?e.post.resource:""}}}},[a("i",{staticClass:"feather feather-edit"}),a("span",[t._v("Edit")])]),a("a",{staticClass:"popover-item popover-item-icon",attrs:{href:t.getSiteUrl+e.post.slug,target:"_blank"}},[a("i",{staticClass:"feather feather-eye"}),a("span",[t._v("View")])]),"published"===e.post.status?a("div",{staticClass:"popover-item popover-item-icon",on:{click:function(a){return t.updateStatus(e.post.id,"draft")}}},[a("i",{staticClass:"feather feather-archive"}),a("span",[t._v("Move to drafts")])]):"draft"===e.post.status?a("div",{staticClass:"popover-item popover-item-icon",on:{click:function(a){return t.updateStatus(e.post.id,"published")}}},[a("i",{staticClass:"feather feather-archive"}),a("span",[t._v("Publish")])]):"bin"===e.post.status?a("div",{staticClass:"popover-item popover-item-icon",on:{click:function(a){return t.updateStatus(e.post.id,"draft")}}},[a("i",{staticClass:"feather feather-archive"}),a("span",[t._v("Restore")])]):t._e(),a("router-link",{staticClass:"popover-item popover-item-icon",attrs:{to:{name:"editor",params:{id:e.post.id},query:{tab:"meta"}}}},[a("i",{staticClass:"feather feather-external-link"}),a("span",[t._v("Meta")])]),a("router-link",{staticClass:"popover-item popover-item-icon",attrs:{to:{name:"editor",params:{id:e.post.id},query:{tab:"seo"}}}},[a("i",{staticClass:"feather feather-search"}),a("span",[t._v("SEO")])]),a("router-link",{staticClass:"popover-item popover-item-icon",attrs:{to:{name:"editor",params:{id:e.post.id},query:{tab:"code-injection"}}}},[a("i",{staticClass:"feather feather-code"}),a("span",[t._v("Code Injection")])]),a("router-link",{staticClass:"popover-item popover-item-icon",attrs:{to:{name:"editor",params:{id:e.post.id},query:{tab:"insights"}}}},[a("i",{staticClass:"feather feather-bar-chart-2"}),a("span",[t._v("Insights")])]),a("div",{staticClass:"popover-line"}),"bin"===e.post.status?a("div",{staticClass:"popover-item popover-item-icon popover-item-border popover-item-orange",on:{click:function(a){return t.handleDelete(e.post)}}},[a("i",{staticClass:"feather feather-trash-2"}),a("span",[t._v("Delete")])]):a("div",{staticClass:"popover-item popover-item-icon popover-item-border popover-item-orange",on:{click:function(a){return t.updateStatus(e.post.id,"bin")}}},[a("i",{staticClass:"feather feather-trash-2"}),a("span",[t._v("Move to bin")])])],1),a("template",{slot:"button"},[a("i",{staticClass:"icon icon-square far fa-ellipsis-h",class:{"icon-square-active":t.activeAction===e.post.uuid}})])],2)],1)])})),0)])])]):a("Alert",{attrs:{colour:"orange"}},[t._t("default",[a("h3",[t._v("No "+t._s("all"===t.activeTabName?"":"bin"===t.activeTabName?"binned":t.activeTabName)+" "+t._s(t.resource["friendly_name"].toLowerCase())+" available. ")]),a("p",[t._v("To create a new one, click the plus sign above.")])])],2)],1)],1)],1)]),a("transition",{attrs:{name:"archive-pagination-trans"}},[!t.doingAxios&&t.paginationObj?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("Pagination",{attrs:{pagination:t.paginationObj},on:{update:t.setPagination}})],1)]):t._e()])],1),a("Modal",{staticClass:"modal-with-icon modal-with-warning",attrs:{show:t.showDeleteModal},on:{"update:show":function(e){t.showDeleteModal=e}}},[a("template",{slot:"button"},[a("button",{staticClass:"btn",class:{"btn-loading":t.isDeleting},on:{click:function(e){return t.deletePost(!1)}}},[t._v("Delete")])]),a("template",{slot:"text"},[a("h2",[t._v("Are you sure?")]),t.selectedPost?a("p",[t._v("Are you sure want to delete this "+t._s(t.resource["singular_name"])+"?")]):a("p",[t._v("Are you sure want to delete "+t._s(t.checked.length)+" "+t._s(t.resource["friendly_name"])+"?")])])],2)],1)},i=[],o=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("d81d"),a("b0c0"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("96cf"),a("1da1")),r=a("a71d"),c=a("90f8"),n=a("9556"),l=a("e6e0"),u=a("2121"),d=a("3af4"),p={name:"Pages",title:"Archive",components:{Alert:r["a"],Breadcrumbs:c["a"],Modal:n["a"],Popover:l["a"],Pagination:u["a"],Tabs:d["a"]},data:function(){return{doingAxios:!0,resource:{},posts:[],selectedPost:!1,paginationObj:{},activeTab:1,activeTabName:"all",order:"",orderBy:{title:"asc",user_id:"asc",status:"asc",published_at:"asc"},activeOrder:"",filter:"",pagination:"",bulkType:"",checked:[],activeAction:"",showDeleteModal:!1,selectedDeleteId:null,isDoingBulk:!1,isDeleting:!1}},mounted:function(){this.filterTabs(1),this.setResource()},watch:{"$route.params.resource":function(){this.setResource(),this.getPosts(),this.activeTab=1}},methods:{getPosts:function(){var t=this,e=this.$route.params.resource,a=/resources/+e;this.axios.get("".concat(a,"?order=").concat(this.order,"&filter=").concat(this.filter,"&").concat(this.pagination),{paramsSerializer:function(t){return t}}).then((function(e){t.posts={},t.paginationObj={},t.paginationObj=e.data.meta.pagination,t.posts=e.data.data})).catch((function(e){t.helpers.handleResponse(e)})).finally((function(){t.doingAxios=!1}))},deletePost:function(){var t=this;this.isDeleting=!0;var e=this.selectedPost?[this.selectedPost.id]:this.checked,a=[];e.forEach((function(e){a.push(t.deleteUserAxios(e))})),Promise.all(a).then((function(){var a=1===e.length?"".concat(t.resource["singular_name"]," deleted successfully."):"".concat(t.resource["name"]," deleted successfully.");t.$noty.success(a),t.getPosts()})).catch((function(e){t.helpers.handleResponse(e)})).finally((function(){t.activeAction="",t.checked=[],t.checkedAll=!1,t.showDeleteModal=!1,t.bulkType="",t.isDeleting=!1,t.selectedPost=!1}))},deleteUserAxios:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.axios.delete("/posts/"+t);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},handleDelete:function(t){this.selectedPost=t,this.showDeleteModal=!0},updateStatus:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"draft",s=[];e?s.push(e):s=this.checked;var i=[];s.forEach((function(e){var s=t.getPostsById(e).post;s.status=a,i.push(t.updateStatusAxios(e,s))})),Promise.all(i).then((function(){var e=1===s.length?"".concat(t.resource["singular_name"]," updated successfully."):"".concat(t.resource["name"]," updated successfully.");t.$noty.success(e),t.getPosts()})).catch((function(e){t.helpers.handleResponse(e)})).finally((function(){t.activeAction="",t.checked=[],t.checkedAll=!1,t.showDeleteModal=!1,t.bulkType="",setTimeout((function(){t.isDoingBulk=!1}),t.timeoutDelay)}))},updateStatusAxios:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.axios.put("/posts/"+t,e);case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}}),s)})))()},setResource:function(){var t=this.getResources[this.$route.params.resource];this.resource=void 0===t?{name:"page",friendly_name:"Pages",singular_name:"Page",slug:"",icon:"fal fa-file"}:t},changeOrderBy:function(t){this.activeOrder=t,"desc"===this.orderBy[t]||""===this.orderBy[t]?this.$set(this.orderBy,t,"asc"):this.$set(this.orderBy,t,"desc"),this.order=t+","+this.orderBy[t],this.getPosts()},filterTabs:function(t){this.pagination="page=1",this.activeTab=t;var e="";switch(t){case 1:this.activeTabName="all",e='{"status":[{"operator":"NOT LIKE", "value": "bin" }]}';break;case 2:this.activeTabName="published",e='{"status":[{"operator":"=", "value": "published" }]}';break;case 3:this.activeTabName="draft",e='{"status":[{"operator":"=", "value": "draft" }]}';break;case 4:this.activeTabName="bin",e='{"status":[{"operator":"=", "value": "bin" }]}';break}this.checkedAll=!1,this.filter=e,this.getPosts()},setPagination:function(t){this.activeAction="",this.pagination=t,this.getPosts()},updateActions:function(t,e){this.activeAction=t?e:""},doBulkAction:function(){var t=this;if(this.isDoingBulk=!0,!this.checked.length)return this.$noty.warning("Select items in order to apply bulk actions"),void setTimeout((function(){t.isDoingBulk=!1}),this.timeoutDelay);"draft"===this.bulkType||"restore"===this.bulkType?this.updateStatus(!1,"draft"):"publish"===this.bulkType?this.updateStatus(!1,"published"):"bin"===this.bulkType?this.updateStatus(!1,"bin"):"delete"===this.bulkType?this.showDeleteModal=!0:(this.$noty.warning("Select a bulk action."),this.isDoingBulk=!1),setTimeout((function(){t.isDoingBulk=!1}),this.timeoutDelay)},getPostsById:function(t){return this.posts.find((function(e){return e.post.id===t}))}},computed:{getResources:function(){return this.$store.state.theme.resources},checkedAll:{get:function(){return this.checked.length===this.posts.length},set:function(t){this.checked=t?this.posts.map((function(t){return t.post.id})):[]}}}},h=p,v=(a("551d"),a("2877")),f=Object(v["a"])(h,s,i,!1,null,"41ef6819",null);e["default"]=f.exports},a71d:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"trans-fade-quick",mode:"out-in"}},[t.show?a("div",{staticClass:"alert alert-background",class:"alert-"+t.colour},[a("div",{staticClass:"alert-icon"},["error"===t.type?a("i",{staticClass:"feather feather-alert-triangle"}):t._e(),"warning"===t.type?a("i",{staticClass:"feather feather-alert-circle"}):t._e(),"success"===t.type?a("i",{staticClass:"feather feather-check-circle"}):t._e()]),a("div",{staticClass:"alert-text"},[t._t("default")],2),a("button",{staticClass:"alert-close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.show=!1}}},[a("i",{staticClass:"feather feather-x"})])]):t._e()])},i=[],o={name:"Alert",props:{colour:{type:String,default:""},type:{type:String,default:"error"}},data:function(){return{show:!0}}},r=o,c=(a("4c2d"),a("2877")),n=Object(c["a"])(r,s,i,!1,null,null,null);e["a"]=n.exports},cdcc:function(t,e,a){},d69c:function(t,e,a){"use strict";var s=a("60c6"),i=a.n(s);i.a},db3c:function(t,e,a){},e6e0:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"popover-cont"},[a("div",{staticClass:"popover-btn",on:{click:t.update}},[t._t("button")],2),a("div",{ref:"popover",staticClass:"popover",class:[{"popover-triangle":t.triangle},{"popover-active":t.show&&t.itemKey===t.active},t.classes]},[a("div",{staticClass:"popover-items-cont"},[t._t("items")],2)])])},i=[],o={name:"Alert",props:{items:{type:Array},triangle:{type:Boolean,default:!1},classes:{type:String,default:""},itemKey:{type:String,default:""},active:{type:String,default:""}},data:function(){return{show:!1}},methods:{update:function(){this.show=!this.show,this.$emit("update",this.show)}},computed:{getItems:function(){return this.items}}},r=o,c=(a("d69c"),a("2877")),n=Object(c["a"])(r,s,i,!1,null,null,null);e["a"]=n.exports}}]);
//# sourceMappingURL=chunk-a687a132.f99b780e.js.map