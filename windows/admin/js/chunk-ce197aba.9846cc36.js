(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce197aba"],{1013:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"auth-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("header",{staticClass:"header header-with-actions"},[a("div",{staticClass:"header-title"},[t.newItem?a("h1",[t._v("New category")]):a("h1",[t._v("Update "+t._s(t.data["name"]))]),a("Breadcrumbs")],1),a("div",{staticClass:"header-actions"},[a("form",{staticClass:"form form-actions"},[t.newItem?t._e():a("button",{staticClass:"btn btn-fixed-height btn-orange btn-margin-right",class:{"btn-loading":t.isDoingBulk},on:{click:function(e){return e.preventDefault(),t.handleDelete(e)}}},[a("span",[t._v("Delete")])]),a("button",{staticClass:"btn btn-fixed-height btn-orange",class:{"btn-loading":t.doingAxios},on:{click:function(e){return e.preventDefault(),t.save(e)}}},[t.newItem?a("span",[t._v("Save")]):a("span",[t._v("Update")])])])])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.doingAxios,expression:"doingAxios"}],staticClass:"media-spinner spinner-container"},[a("div",{staticClass:"spinner spinner-large spinner-grey"})]),t.doingAxios?t._e():a("div",{staticClass:"row trans-fade-in-anim"},[a("div",{staticClass:"col-12"},[a("h6",{staticClass:"margin"},[t._v("General")]),a("div",{staticClass:"card card-small-box-shadow card-expand"},[a("Collapse",{staticClass:"collapse-border-bottom",class:{"card-expand-error":t.errors["name"]||t.errors["description"]},attrs:{show:t.newItem},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"card-header"},[a("div",[a("h4",{staticClass:"card-title"},[t._v("Name & description")]),a("p",[t._v("Enter a name and description for the category.")])]),a("div",{staticClass:"card-controls"},[a("i",{staticClass:"feather feather-chevron-down"})])])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"card-body"},[a("FormGroup",{attrs:{label:"Name*",error:t.errors["name"]}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data["name"],expression:"data['name']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:t.data["name"]},on:{input:function(e){e.target.composing||t.$set(t.data,"name",e.target.value)}}})]),a("FormGroup",{attrs:{label:"Description",error:t.errors["description"]}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data["description"],expression:"data['description']"}],staticClass:"form-textarea form-input form-input-white",attrs:{rows:"6",type:"text"},domProps:{value:t.data["description"]},on:{input:function(e){e.target.composing||t.$set(t.data,"description",e.target.value)}}})])],1)]},proxy:!0}],null,!1,2344125005)}),a("Collapse",{staticClass:"collapse-border-bottom",class:{"card-expand-error":t.errors["slug"]},attrs:{show:t.newItem},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"card-header"},[a("div",[a("h4",{staticClass:"card-title"},[t._v("Slug")]),a("p",[t._v("Enter a slug for the category, by default it will use the name, and will be assigned after the resource, for example: /news/tech")])]),a("div",{staticClass:"card-controls"},[a("i",{staticClass:"feather feather-chevron-down"})])])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"card-body"},[a("FormGroup",{staticClass:"form-url",attrs:{label:"Slug*",error:t.errors["slug"]}},[a("div",{staticClass:"form-url-cont"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.slug,expression:"slug"}],staticClass:"form-input form-input-white",attrs:{type:"text",id:"options-url",disabled:!t.slugBtn},domProps:{value:t.slug},on:{input:function(e){e.target.composing||(t.slug=e.target.value)}}}),a("i",{staticClass:"feather feather-edit",on:{click:function(e){t.slugBtn=!t.slugBtn}}})]),a("h4",[t._v(t._s(t.computedSlug))])])],1)]},proxy:!0}],null,!1,1529468700)}),""===t.data["parent_id"]||null===t.data["parent_id"]?a("Collapse",{staticClass:"collapse-border-bottom",class:{"card-expand-error":t.errors["resource"]},attrs:{show:t.newItem},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"card-header"},[a("div",[a("h4",{staticClass:"card-title"},[t._v("Resource")]),a("p",[t._v("Choose a resource the category will be assigned too.")])]),a("div",{staticClass:"card-controls"},[a("i",{staticClass:"feather feather-chevron-down"})])])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"card-body"},[a("FormGroup",{attrs:{label:"Resource*",error:t.errors["resource"]}},[a("div",{staticClass:"form-select-cont form-input"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data["resource"],expression:"data['resource']"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"resource",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disbaled:"",selected:"",value:""}},[t._v("Select resource")]),a("option",{attrs:{value:"page"}},[t._v("Pages")]),t._l(t.getTheme["resources"],(function(e,s){return a("option",{key:e.name,domProps:{value:s}},[t._v(t._s(e["friendly_name"]))])}))],2)])])],1)]},proxy:!0}],null,!1,3180348336)}):t._e(),a("Collapse",{staticClass:"collapse-border-bottom",class:{"card-expand-error":t.errors["parent"]},attrs:{show:t.newItem},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"card-header"},[a("div",[a("h4",{staticClass:"card-title"},[t._v("Parent")]),a("p",[t._v("Choose a parent category.")])]),a("div",{staticClass:"card-controls"},[a("i",{staticClass:"feather feather-chevron-down"})])])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"card-body"},[a("FormGroup",{attrs:{label:"Parent"}},[a("div",{staticClass:"form-select-cont form-input"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data["parent_id"],expression:"data['parent_id']"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"parent_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"",value:""}},[t._v("No parent")]),t._l(t.categories,(function(e){return a("option",{key:e.uuid,domProps:{value:e.id}},[t._v(t._s(e["name"]))])}))],2)])])],1)]},proxy:!0}],null,!1,3218970257)}),a("Collapse",{staticClass:"collapse-border-bottom",class:{"card-expand-error":t.errors["parent"]},staticStyle:{display:"none !important"},attrs:{show:t.newItem},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"card-header"},[a("div",[a("h4",{staticClass:"card-title"},[t._v("Archive page")]),a("p",[t._v("Choose an archive page for this category.")])]),a("div",{staticClass:"card-controls"},[a("i",{staticClass:"feather feather-chevron-down"})])])]},proxy:!0},{key:"body",fn:function(){return[a("div",{staticClass:"card-body"},[a("FormGroup",{attrs:{label:"Parent"}},[a("div",{staticClass:"form-select-cont form-input"},[a("vue-tags-input",{attrs:{tags:t.selectedTags,"autocomplete-items":t.filteredPosts,"add-only-from-autocomplete":""},on:{"tags-changed":t.updateTags},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}}),t._v(" //set the prop autocomplete-min-length to 0. I think it's the behaviour you are looking for. "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.data["parent_id"],expression:"data['parent_id']"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.data,"parent_id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{selected:"",value:""}},[t._v("No parent")]),t._l(t.posts,(function(e){return a("option",{key:e.post.uuid,domProps:{value:e.post.id}},[t._v(t._s(e.post["title"]))])}))],2)],1)])],1)]},proxy:!0}],null,!1,3151764786)})],1)])])]),a("Modal",{staticClass:"modal-with-icon modal-with-warning",attrs:{show:t.showDeleteModal},on:{"update:show":function(e){t.showDeleteModal=e}}},[a("template",{slot:"button"},[a("button",{staticClass:"btn",class:{"btn-loading":t.isDeleting},on:{click:t.deleteCategory}},[t._v("Delete")])]),a("template",{slot:"text"},[a("h2",[t._v("Are you sure?")]),a("p",[t._v("Are you sure want to delete this category?")])])],2)],1)},r=[],o=(a("4de4"),a("7db0"),a("4160"),a("c975"),a("b0c0"),a("d3b7"),a("159b"),a("90f8")),n=a("e361"),i=a("d7f8"),l=a("9556"),c={name:"Categories",components:{Modal:l["a"],FormGroup:i["a"],Collapse:n["a"],Breadcrumbs:o["a"]},data:function(){return{doingAxios:!0,categories:[],posts:[],errors:{},data:{name:"",description:"",slug:"",resource:"",parent_id:""},newItem:!0,slug:"",slugBtn:!1,isDeleting:!1,isDoingBulk:!1,showDeleteModal:!1,selectedTags:[],tag:""}},beforeMount:function(){this.setNewUpdate()},mounted:function(){this.getCategories(),this.getPosts()},methods:{getSuccessMessage:function(){this.$route.query.success&&this.$noty.success("Successfully created new category.")},getCategories:function(){var t=this;this.axios.get("/categories").then((function(e){t.categories=e.data.data})).catch((function(e){t.helpers.handleResponse(e)})).finally((function(){t.doingAxios=!1}))},getCategoryById:function(t){var e=this;this.axios.get("/categories/"+t).then((function(t){var a=t.data.data;e.data||e.$router.push({name:"not-found"}),a["parent_id"]=null===a["parent_id"]?"":a["parent_id"],a["resource"]=null===a["resource"]?"":a["resource"],e.data=a})).catch((function(t){e.helpers.handleResponse(t)})).finally((function(){e.doingAxios=!1}))},getPosts:function(){var t=this;this.axios.get("/posts").then((function(e){t.posts=e.data.data})).catch((function(e){t.handleResponse(e)}))},save:function(){var t=this;if(this.doingAxios=!0,""===this.data["parent_id"])this.$set(this.data,"parent_id",null);else{var e=this.findParent(this.data["parent_id"]);this.$set(this.data,"resource",e["resource"])}this.$set(this.data,"slug",this.saveSlug),this.newItem?this.axios.post("/categories",this.data).then((function(e){console.log(e),t.errors={},t.$noty.success("Successfully created category"),t.$router.push({name:"categories-single",params:{id:e.data.data.id},query:{success:"true"}}),t.data=e.data.data,t.newItem=!1})).catch((function(e){if(t.helpers.checkServer(e),400===e.response.status)return t.validate(e.response.data.data.errors),t.$noty.error("Fix the errors before saving the category."),void t.setAllHeight();console.log(e.response),t.$noty.error(e.response.data.message)})).finally((function(){setTimeout((function(){t.doingAxios=!1}),t.timeoutDelay)})):this.axios.put("/categories/"+this.$route.params.id,this.data).then((function(){t.errors={},t.$noty.success("Successfully updated category")})).catch((function(e){if(t.helpers.checkServer(e),400===e.response.status)return t.validate(e.response.data.data.errors),t.$noty.error(t.errorMsg),void t.setAllHeight();console.log(e.response),t.$noty.error(e.response.data.message)})).finally((function(){setTimeout((function(){t.doingAxios=!1}),t.timeoutDelay)}))},findParent:function(t){if(this.categories.length)return this.categories.find((function(e){return e.id===t}))},handleDelete:function(){var t=this;this.isDoingBulk=!0,this.showDeleteModal=!0,setTimeout((function(){t.isDoingBulk=!1}),this.timeoutDelay)},deleteCategory:function(){var t=this;this.axios.delete("/categories/"+this.data["id"]).then((function(){t.$router.push({name:"categories",query:{delete:"true"}})})).catch((function(e){t.helpers.handleResponse(e)}))},setNewUpdate:function(){var t="new"===this.$route.params.id;this.newItem=t,t?this.doingAxios=!1:this.getCategoryById(this.$route.params.id)},updateTags:function(){},validate:function(t){var e=this;this.errors={},t.forEach((function(t){e.$set(e.errors,t.key,t.message)}))}},computed:{computedSlug:function(){if(""!==this.data["parent_id"]){var t=this.findParent(this.data["parent_id"]);if(t)return t["slug"]+"/"+this.slugify(this.slug?this.slug:this.data["name"])}if("page"===this.data["resource"])return"/"+this.slugify(this.slug?this.slug:this.data["name"]);var e=""===this.data["resource"]?"/":"/"+this.data["resource"]+"/";return e+this.slugify(this.slug?this.slug:this.data["name"])},filteredPosts:function(){var t=this;return this.posts.filter((function(e){return-1!==e.text.toLowerCase().indexOf(t.tag.toLowerCase())}))},saveSlug:function(){return this.slugify(this.slug?this.slug:this.data["name"])}}},u=c,d=(a("de6d"),a("2877")),f=Object(d["a"])(u,s,r,!1,null,"c204db44",null);e["default"]=f.exports},"4de4":function(t,e,a){"use strict";var s=a("23e7"),r=a("b727").filter,o=a("1dde"),n=a("ae40"),i=o("filter"),l=n("filter");s({target:"Array",proto:!0,forced:!i||!l},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"5ee2":function(t,e,a){"use strict";var s=a("f836"),r=a.n(s);r.a},"7db0":function(t,e,a){"use strict";var s=a("23e7"),r=a("b727").find,o=a("44d2"),n=a("ae40"),i="find",l=!0,c=n(i);i in[]&&Array(1)[i]((function(){l=!1})),s({target:"Array",proto:!0,forced:l||!c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},"90f8":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"breadcrumbs"},[a("ul",{staticClass:"breadcrumbs-list"},t._l(t.breadcrumbs,(function(e){return a("li",{key:e.url,staticClass:"breadcrumbs-item"},[a("router-link",{staticClass:"breadcrumbs-link",class:{"breadcrumbs-link-active":e.active},attrs:{to:e.url}},[t._v(t._s(e.name)+" ")])],1)})),0)])},r=[],o=(a("7db0"),a("4160"),a("b0c0"),a("ac1f"),a("5319"),a("1276"),a("159b"),{name:"Breadcrumbs",data:function(){return{breadcrumbs:[]}},beforeMount:function(){this.updateList()},watch:{$route:function(){this.updateList()}},methods:{updateList:function(){var t=this;this.breadcrumbs=[];var e=this.$route.fullPath,a=e.split("/");if("home"===this.$route.name)this.breadcrumbs.push({name:"Home",url:"/",active:!0});else{var s="",r=!0;a.forEach((function(e){var a;s+=e+"/",r?(a=s,r=!1):a=s.replace(/\/$/,""),e=e.split("?")[0],"resources"===e&&"settings"===e||t.breadcrumbs.push({name:""===e?"Home":t.capitalize(e),url:a,active:t.$route.fullPath===a})}))}},addPage:function(){},getRoute:function(t){return this.$router.options.routes.find((function(e){return e.name===t}))},capitalize:function(t){return t.replace(/(?:^|\s|["'([{])+\S/g,(function(t){return t.toUpperCase()}))}}}),n=o,i=(a("5ee2"),a("2877")),l=Object(i["a"])(n,s,r,!1,null,"7d86a761",null);e["a"]=l.exports},9556:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"trans-fade"}},[t.showModal?a("div",{staticClass:"modal modal-centered",class:{"modal-open":t.showModal},attrs:{"aria-hidden":"true"}},[a("div",{staticClass:"modal-container trans-fade-down-anim"},[a("div",{staticClass:"modal-close",on:{click:function(e){t.showModal=!1}}},[a("i",{staticClass:"feather feather-x"})]),a("div",{staticClass:"modal-warning"},[a("div",{staticClass:"modal-icon"},[a("i",{staticClass:"feather feather-alert-triangle"})])]),a("div",{staticClass:"modal-text"},[t._t("text")],2),t._t("button")],2),a("div",{staticClass:"modal-overlay",on:{click:function(e){t.showModal=!1}}})]):t._e()])},r=[],o={name:"Modal",props:{show:{type:Boolean,default:!1}},computed:{showModal:{get:function(){return this.show},set:function(t){this.$emit("update:show",t)}}}},n=o,i=(a("f802"),a("2877")),l=Object(i["a"])(n,s,r,!1,null,null,null);e["a"]=l.exports},c975:function(t,e,a){"use strict";var s=a("23e7"),r=a("4d64").indexOf,o=a("a640"),n=a("ae40"),i=[].indexOf,l=!!i&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),u=n("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:l||!c||!u},{indexOf:function(t){return l?i.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},c980:function(t,e,a){},d7f8:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-group",class:{"form-group-error":t.getError}},[a("label",{staticClass:"form-label"},[t._v(t._s(t.label))]),t._t("default"),a("transition",{attrs:{name:"trans-fade-height"}},[t.getError?a("span",{staticClass:"field-message field-message-warning"},[t._v(t._s(t.getError))]):t._e()])],2)},r=[],o={name:"FormGroup",props:{label:{type:String,default:""},error:{type:String,default:""}},data:function(){return{show:!0}},computed:{getError:function(){return""!==this.error&&this.error}}},n=o,i=a("2877"),l=Object(i["a"])(n,s,r,!1,null,"715e7f67",null);e["a"]=l.exports},de6d:function(t,e,a){"use strict";var s=a("ebd4"),r=a.n(s);r.a},ebd4:function(t,e,a){},f802:function(t,e,a){"use strict";var s=a("c980"),r=a.n(s);r.a},f836:function(t,e,a){}}]);
//# sourceMappingURL=chunk-ce197aba.9846cc36.js.map