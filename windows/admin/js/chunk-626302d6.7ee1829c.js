(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-626302d6"],{"2c23":function(s,t,e){},"349a":function(s,t,e){"use strict";var r=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("figure",{staticClass:"image"},[s._t("default"),e("div",{staticClass:"image-buttons"},[e("i",{staticClass:"feather feather-edit image-buttons-choose",on:{click:function(t){return s.$emit("choose",!0)}}}),e("i",{staticClass:"feather feather-trash image-buttons-remove",on:{click:function(t){return s.$emit("remove",!0)}}})])],2)},a=[],o={name:"ImageWithActions"},i=o,n=(e("75e3"),e("2877")),d=Object(n["a"])(i,r,a,!1,null,"542b6712",null);t["a"]=d.exports},"488c":function(s,t,e){"use strict";e.r(t);var r=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("section",[e("div",{staticClass:"auth-container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("header",{staticClass:"header header-with-actions header-margin-large"},[e("div",{staticClass:"header-title"},[s.isSelf?e("h1",[s._v("Edit profile")]):e("h1",[s._v("Edit User "+s._s(s.data["first_name"])+" "+s._s(s.data["last_name"]))]),e("Breadcrumbs")],1),e("div",{staticClass:"header-actions"},[e("button",{staticClass:"btn btn-orange",class:{"btn-loading":s.isSavingUser},on:{click:function(t){return t.preventDefault(),s.save(t)}}},[s._v(" Update "),e("span",{staticClass:"btn-hide-text-mob"},[s._v("Profile")])])])])])]),s.doingAxios?e("div",{staticClass:"media-spinner spinner-container"},[e("div",{staticClass:"spinner spinner-large spinner-grey"})]):e("form",{staticClass:"form"},[e("div",{staticClass:"form-row-group"},[s._m(0),e("div",{staticClass:"row form-row form-row-border form-row-border-top"},[s._m(1),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["first_name"]}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.data["first_name"],expression:"data['first_name']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["first_name"]},on:{input:function(t){t.target.composing||s.$set(s.data,"first_name",t.target.value)}}})])],1)]),e("div",{staticClass:"row form-row form-row-border"},[s._m(2),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["last_name"]}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.data["last_name"],expression:"data['last_name']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["last_name"]},on:{input:function(t){t.target.composing||s.$set(s.data,"last_name",t.target.value)}}})])],1)])]),e("div",{staticClass:"form-row-group"},[s._m(3),e("div",{staticClass:"row form-row form-row-border form-row-border-top"},[s._m(4),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["email"]}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.data["email"],expression:"data['email']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["email"]},on:{input:function(t){t.target.composing||s.$set(s.data,"email",t.target.value)}}})])],1)]),e("div",{staticClass:"row form-row form-row-border"},[s._m(5),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["website"]}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.data["website"],expression:"data['website']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["website"]},on:{input:function(t){t.target.composing||s.$set(s.data,"website",t.target.value)}}})])],1)]),e("div",{staticClass:"row form-row form-row-border"},[s._m(6),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["facebook"]}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.data["facebook"],expression:"data['facebook']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["facebook"]},on:{input:function(t){t.target.composing||s.$set(s.data,"facebook",t.target.value)}}})])],1)]),e("div",{staticClass:"row form-row form-row-border"},[s._m(7),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["twitter"]}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.data["twitter"],expression:"data['twitter']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["twitter"]},on:{input:function(t){t.target.composing||s.$set(s.data,"twitter",t.target.value)}}})])],1)]),e("div",{staticClass:"row form-row form-row-border"},[s._m(8),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["linked_in"]}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.data["linked_in"],expression:"data['linked_in']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["linked_in"]},on:{input:function(t){t.target.composing||s.$set(s.data,"linked_in",t.target.value)}}})])],1)])]),e("div",{staticClass:"form-row-group"},[s._m(9),e("div",{staticClass:"row form-row form-row-border form-row-border-top"},[s._m(10),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[s.profilePicture?e("div",[e("ImageWithActions",{on:{choose:function(t){s.showImageModal=!0},remove:s.removeProfilePicture}},[e("img",{attrs:{src:s.getSiteUrl+s.profilePicture["url"]}})])],1):e("div",[e("button",{staticClass:"btn",on:{click:function(t){t.preventDefault(),s.showImageModal=!0}}},[s._v("Add photo")])])])])]),s.isSelf?e("div",{staticClass:"form-row-group profile-last-row"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"profile-reset-password"},[e("h2",[s._v("Reset password")]),e("div",[e("button",{staticClass:"btn btn-orange",class:{"btn-loading":s.isSavingPassword},on:{click:function(t){return t.preventDefault(),s.resetPassword(t)}}},[s._v("Reset")])])])])]),e("div",{staticClass:"row form-row form-row-border"},[s._m(11),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["current_password"]}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.password["current_password"],expression:"password['current_password']"}],staticClass:"form-input form-input-white",attrs:{type:"password",placeholder:"Current password"},domProps:{value:s.password["current_password"]},on:{input:function(t){t.target.composing||s.$set(s.password,"current_password",t.target.value)}}})])],1)]),e("div",{staticClass:"row form-row form-row-border"},[e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Password")]),e("p",[s._v("Enter a new password, a minimum of 8 alphanumeric characters are required.")]),e("button",{staticClass:"btn profile-generate-pass",on:{click:function(t){return t.preventDefault(),s.generatePassword(t)}}},[s._v("Generate password")])]),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["new_password"]}},["checkbox"===(s.isGeneratedPassword?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.password["new_password"],expression:"password['new_password']"}],staticClass:"form-input form-input-white",attrs:{placeholder:"New password",type:"checkbox"},domProps:{checked:Array.isArray(s.password["new_password"])?s._i(s.password["new_password"],null)>-1:s.password["new_password"]},on:{change:function(t){var e=s.password["new_password"],r=t.target,a=!!r.checked;if(Array.isArray(e)){var o=null,i=s._i(e,o);r.checked?i<0&&s.$set(s.password,"new_password",e.concat([o])):i>-1&&s.$set(s.password,"new_password",e.slice(0,i).concat(e.slice(i+1)))}else s.$set(s.password,"new_password",a)}}}):"radio"===(s.isGeneratedPassword?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.password["new_password"],expression:"password['new_password']"}],staticClass:"form-input form-input-white",attrs:{placeholder:"New password",type:"radio"},domProps:{checked:s._q(s.password["new_password"],null)},on:{change:function(t){return s.$set(s.password,"new_password",null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:s.password["new_password"],expression:"password['new_password']"}],staticClass:"form-input form-input-white",attrs:{placeholder:"New password",type:s.isGeneratedPassword?"text":"password"},domProps:{value:s.password["new_password"]},on:{input:function(t){t.target.composing||s.$set(s.password,"new_password",t.target.value)}}})])],1)]),e("div",{staticClass:"row form-row form-row-border"},[s._m(12),e("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[e("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["confirm_password"]}},["checkbox"===(s.isGeneratedPassword?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.password["confirm_password"],expression:"password['confirm_password']"}],staticClass:"form-input form-input-white form-input-test",attrs:{placeholder:"Confirm password",type:"checkbox"},domProps:{checked:Array.isArray(s.password["confirm_password"])?s._i(s.password["confirm_password"],null)>-1:s.password["confirm_password"]},on:{change:function(t){var e=s.password["confirm_password"],r=t.target,a=!!r.checked;if(Array.isArray(e)){var o=null,i=s._i(e,o);r.checked?i<0&&s.$set(s.password,"confirm_password",e.concat([o])):i>-1&&s.$set(s.password,"confirm_password",e.slice(0,i).concat(e.slice(i+1)))}else s.$set(s.password,"confirm_password",a)}}}):"radio"===(s.isGeneratedPassword?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.password["confirm_password"],expression:"password['confirm_password']"}],staticClass:"form-input form-input-white form-input-test",attrs:{placeholder:"Confirm password",type:"radio"},domProps:{checked:s._q(s.password["confirm_password"],null)},on:{change:function(t){return s.$set(s.password,"confirm_password",null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:s.password["confirm_password"],expression:"password['confirm_password']"}],staticClass:"form-input form-input-white form-input-test",attrs:{placeholder:"Confirm password",type:s.isGeneratedPassword?"text":"password"},domProps:{value:s.password["confirm_password"]},on:{input:function(t){t.target.composing||s.$set(s.password,"confirm_password",t.target.value)}}})])],1)])]):s._e()])]),e("Modal",{staticClass:"modal-full-width modal-hide-close",attrs:{show:s.showImageModal},on:{"update:show":function(t){s.showImageModal=t}}},[e("template",{slot:"text"},[e("Uploader",{staticClass:"media-modal",attrs:{rows:3,modal:!0,filters:!1,options:!1},on:{insert:s.insertProfilePicture}},[e("template",{slot:"close"},[e("button",{staticClass:"btn btn-margin-right btn-icon-mob",on:{click:function(t){t.preventDefault(),s.showImageModal=!1}}},[e("i",{staticClass:"feather feather-x"}),e("span",[s._v("Close")])])])],2)],1)],2)],1)},a=[function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h2",[s._v("Basic options")])])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("First name*")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Last name*")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h2",[s._v("Contact Info")])])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Email address*")]),e("p",[s._v("Enter a valid email address, this will be used for signing in to Verbis.")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Website")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Facebook")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Twitter")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("LinkedIn")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("h2",[s._v("Profile")])])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Profile picture")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Current password")]),e("p",[s._v("Type in your current password.")])])},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"col-12 col-desk-4 col-hd-2"},[e("h4",[s._v("Confirm Password")]),e("p",[s._v("Enter the same password in again.")])])}],o=(e("7db0"),e("4160"),e("d3b7"),e("3ca3"),e("159b"),e("ddb0"),e("96cf"),e("1da1")),i=e("90f8"),n=e("9556"),d=e("fb0b"),c=e("349a"),l=e("87f5"),u=e("d7f8"),p={name:"Home",title:"Profile",mixins:[l["a"]],components:{FormGroup:u["a"],ImageWithActions:c["a"],Uploader:d["a"],Modal:n["a"],Breadcrumbs:i["a"]},data:function(){return{doingAxios:!0,data:{website:""},password:{id:!1,current_password:"",new_password:"",confirm_password:""},media:[],errors:[],isSelf:!1,showImageModal:!1,profilePicture:!1,timeout:null,isSavingUser:!1,isSavingPassword:!1,isGeneratedPassword:!1}},mounted:function(){this.init()},watch:{"$route.params.id":function(){this.init()}},methods:{init:function(){var s=this;this.userId=this.$route.params.id,parseFloat(this.userId)===this.getUserInfo.id&&this.$router.push({name:"not-found"}),this.userId?Promise.all([this.getMedia(),this.getUser()]).then((function(){return s.getProfilePicture()})):(this.data=this.getUserInfo,this.userId=this.data.id,this.isSelf=!0,this.doingAxios=!1,this.getMedia().then((function(){return s.getProfilePicture()})))},save:function(){var s=this;this.isSavingUser=!0,this.errors.length?this.$noty.error("Fix the errors before saving your profile."):(this.data["password"]=this.newPassword,this.profilePicture&&(this.data["profile_picture_id"]=this.profilePicture.id),this.$delete(this.data,"confirm_password"),this.axios.put("/users/"+this.userId,this.data).then((function(t){s.errors=[];var e=s.isSelf?"Profile updated successfully.":"User updated successfully.";s.$noty.success(e),s.isSelf&&s.$store.commit("setUser",t.data.data)})).catch((function(t){if(console.log(t),400!==t.response.status)s.helpers.handleResponse(t);else{s.validate(t.response.data.data.errors);var e=s.isSelf?"Fix the errors before saving your profile.":"User updated successfully.";s.$noty.error(e)}})).finally((function(){setTimeout((function(){s.isSavingUser=!1}),s.timeoutDelay)})))},resetPassword:function(){var s=this;this.isSavingPassword=!0,this.password.id=this.userId,this.axios.post("/users/"+this.userId+"/reset-password",this.password).then((function(){s.errors=[],s.password={},s.isGeneratedPassword=!1,s.$noty.success("Password updated successfully.")})).catch((function(t){if(s.helpers.checkServer(t),400===t.response.status)return s.validate(t.response.data.data.errors),void s.$noty.error("Fix the errors before resetting password.");s.helpers.handleResponse(t)})).finally((function(){setTimeout((function(){s.isSavingPassword=!0}),s.timeoutDelay)}))},sendResetPassword:function(){var s=this;this.axios.post("/password/email",{email:this.data.email}).then((function(s){console.log(s)})).catch((function(t){s.helpers.handleResponse(t)}))},getUser:function(){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.axios.get("/users/"+s.userId).then((function(t){var e=t.data.data;s.helpers.isEmptyObject(e)&&s.$router.push({name:"not-found"}),s.data=e})).catch((function(t){s.helpers.handleResponse(t)})).finally((function(){s.doingAxios=!1}));case 2:case"end":return t.stop()}}),t)})))()},validate:function(s){var t=this;this.errors={},s.forEach((function(s){t.$set(t.errors,s.key,s.message)}))},insertProfilePicture:function(s){this.profilePicture=s,this.showImageModal=!1,this.isSelf&&this.$store.commit("setProfilePicture",s)},removeProfilePicture:function(){this.profilePicture=!1,this.$store.commit("setProfilePicture",!1)},getMedia:function(){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.axios.get("/media").then((function(t){s.media=t.data.data}));case 2:case"end":return t.stop()}}),t)})))()},getProfilePicture:function(){var s=this;this.profilePicture=this.media.find((function(t){return t.id===s.data["profile_picture_id"]}))},generatePassword:function(){var s=this.createPassword();this.password["new_password"]=s,this.password["confirm_password"]=s,this.isGeneratedPassword=!0}}},m=p,f=(e("e99e"),e("2877")),w=Object(f["a"])(m,r,a,!1,null,"219d06fa",null);t["default"]=w.exports},"75e3":function(s,t,e){"use strict";var r=e("7c5e"),a=e.n(r);a.a},"7c5e":function(s,t,e){},"87f5":function(s,t,e){"use strict";e.d(t,"a",(function(){return r}));var r={methods:{createPassword:function(){for(var s="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@:\\/@£$%=^&&*()_+?><",e=t.length,r=24,a=0;a<r;a++)s+=t.charAt(Math.floor(Math.random()*e));return s}}}},d7f8:function(s,t,e){"use strict";var r=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"form-group",class:{"form-group-error":s.getError}},[e("label",{staticClass:"form-label"},[s._v(s._s(s.label))]),s._t("default"),e("transition",{attrs:{name:"trans-fade-height"}},[s.getError?e("span",{staticClass:"field-message field-message-warning"},[s._v(s._s(s.getError))]):s._e()])],2)},a=[],o={name:"FormGroup",props:{label:{type:String,default:""},error:{type:String,default:""}},data:function(){return{show:!0}},computed:{getError:function(){return""!==this.error&&this.error}}},i=o,n=e("2877"),d=Object(n["a"])(i,r,a,!1,null,"715e7f67",null);t["a"]=d.exports},e99e:function(s,t,e){"use strict";var r=e("2c23"),a=e.n(r);a.a}}]);
//# sourceMappingURL=chunk-626302d6.7ee1829c.js.map